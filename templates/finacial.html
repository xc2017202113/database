<!DOCTYPE html>
<html lang="en">
<head>
   <!-- 公共样式 开始 -->
        <meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
		<!-- Google Chrome Frame也可以让IE用上Chrome的引擎: -->
		<meta name="renderer" content="webkit">
		<!--国产浏览器高速模式-->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="信息学院" />
		<!-- 作者 -->
		<meta name="revised" content="数据库.v3, 2019/12/13" />
		<!-- 定义页面的最新版本 -->
		<meta name="description" content="网站简介" />
		<!-- 网站简介 -->
		<meta name="keywords" content="搜索关键字，以半角英文逗号隔开" />
		<title>信息学院出品</title>

		<link rel="shortcut icon" href=" {{ url_for('static',filename='images/bg.jpg') }}"/>
		<link rel="bookmark" href="{{ url_for('static',filename='images/bg.jpg') }}">

		<link rel="stylesheet" type="text/css" href=" {{ url_for('static',filename='css/base.css') }}">
		<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/iconfont.css') }}">
		<script type="text/javascript" src="{{ url_for('static',filename='js/jquery-1.11.3.min.js') }}" ></script>
		<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='layui/css/layui.css') }}">
		<script type="text/javascript" src=" {{ url_for('static',filename='layui/layui.js') }}"></script>

		<!-- 滚动条插件 -->




		<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/jquery.mCustomScrollbar.css') }}">
		<script src="{{ url_for('static',filename='js/jquery-ui-1.10.4.min.js') }}"></script>
		<script src="{{ url_for('static',filename='js/jquery.mousewheel.min.js') }}"></script>
		<script src="{{ url_for('static',filename='js/jquery.mCustomScrollbar.min.js') }}"></script>
		<script src="{{ url_for('static',filename='js/cframe.js') }}"></script><!-- 仅供所有子页面使用 -->
		<!-- 公共样式 结束 -->
</head>
<body>
    <div class="all">
        <form class="layui-form" action="" id="demo">
                        <div class="layui-form-item">
                            <div class="layui-input-inline">
                                <input type="text" name="name" required lay-verify="required" placeholder="输入股票代码" autocomplete="off" class="layui-input">
                            </div>
                            <button type="button" class="layui-btn" lay-submit lay-filter="formDemo" id="dasdf" data-type="reload">检索</button>
                        </div>
        </form>
        <table id="demo2" lay-filter="test"></table>
        <script>
            var paras = 1;



            layui.use('table',function () {
                var table = layui.table;
                table.render({
                    elem: '#demo2',
                    id: 'list',
                    type: 'post',
                    height: 500,
                    //写后端的网址 --server.py里 处理数据
                    url: 'http://127.0.0.1:8777/finacial_data',
                    page: true,
                    limit: 10,

                    //where 条件是要传入数据的标识
                    where: {'socket_code': paras},
                    loading: false,
                    LAY_CHECKED: true,

                    cols: [[{field: 'socket_code', title: '股票代码', width: 100},
                        {field: 'year', title: '年度', width: 100},
                        {field: 'stock_abbreviation', title: '股票简称', width: 100},
                        {field: 'company_cname', title: '公司中文名', width: 200},
                        {field: 'company_ename', title: '公司英文名', width: 200},
                        {field: 'region', title: '地区', width: 100},
                        {field: 'exchange', title: '交易所', width: 100},
                        {field: 'business_income', title: '营业收入', width: 100},
                        {field: 'total_assests', title: '总资产', width: 100},
                        {field: 'basic_earning_per_share', title: '基本每股收益', width: 100},
                        {field: 'net_asset_per_share', title: '每股净资产', width: 100},
                        {field: 'income_per_share', title: '每股营业收入', width: 100},
                        ]]

                });

                //可以照着前面的写 但是要修改检索的值
                var $ = layui.$, active = {
                reload: function(){
                //获取用户名
                    console.log("----------------");
                    var form= new FormData(document.getElementById("demo"));

                    //修改para 就是修改检索的值
                    var values = {};
                    for (var value of form) {
                        // 	console.log("value:"+typeof(value));
                       values[value[0]] = value[1];
                       console.log(values);
                    }

                    paras = values['name'];


                    table.reload('list', {
                        elem: '#demo2',
                        id: 'list',
                        type: 'post',
                        height: 500,
                        url: 'http://127.0.0.1:8777/finacial_data',
                        page: true,
                        limit: 10,


                        where: {'socket_code': paras},
                        loading: false,
                        LAY_CHECKED: true,
                        cols: [[{field: 'socket_code', title: '股票代码', width: 100},
                        {field: 'year', title: '年度', width: 100},
                        {field: 'stock_abbreviation', title: '股票简称', width: 100},
                        {field: 'company_cname', title: '公司中文名', width: 200},
                        {field: 'company_ename', title: '公司英文名', width: 200},
                        {field: 'region', title: '地区', width: 100},
                        {field: 'exchange', title: '交易所', width: 100},
                        {field: 'business_income', title: '营业收入', width: 100},
                        {field: 'total_assests', title: '总资产', width: 100},
                        {field: 'basic_earning_per_share', title: '基本每股收益', width: 100},
                        {field: 'net_asset_per_share', title: '每股净资产', width: 100},
                        {field: 'income_per_share', title: '每股营业收入', width: 100},]]
                      });
                   }
             };
	  //点击搜索按钮根据用户名称查询

              $('#dasdf').on('click',
                  function(){
                      console.log("1231231242354345");
                      var type = $(this).data('type');
                      console.log(type);
                      active[type] ? active[type].call(this) : '';
                  });

    });








        </script>

    </div>
</body>
</html>